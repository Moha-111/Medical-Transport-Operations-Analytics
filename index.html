<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ÙˆØµÙ„ | Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù†Ù‚Ù„ Ø§Ù„Ù…Ø±Ø¶Ù‰</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;900&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
<style>
:root {
  --bg:        #060A14;
  --surface:   #0C1120;
  --surface2:  #131D30;
  --surface3:  #1A263D;
  --border:    rgba(255,255,255,0.07);
  --teal:      #00C9A7;
  --teal2:     #0098DB;
  --amber:     #F6A623;
  --red:       #FF5252;
  --green:     #30D158;
  --purple:    #BF5AF2;
  --text:      #EDF0F7;
  --muted:     #5E7391;
  --sidebar-w: 240px;
}
*{margin:0;padding:0;box-sizing:border-box;}
html{scroll-behavior:smooth;}
body{
  font-family:'Cairo',sans-serif;
  background:var(--bg);
  color:var(--text);
  display:flex;
  min-height:100vh;
  overflow-x:hidden;
}

/* â•â• SIDEBAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sidebar{
  width:var(--sidebar-w);
  background:var(--surface);
  border-left:1px solid var(--border);
  display:flex;
  flex-direction:column;
  position:fixed;
  right:0; top:0; bottom:0;
  z-index:50;
  transition:transform .3s;
}
.sidebar-logo{
  padding:24px 20px 20px;
  border-bottom:1px solid var(--border);
}
.logo-mark{
  display:flex;align-items:center;gap:12px;
  margin-bottom:4px;
}
.logo-icon{
  width:40px;height:40px;
  background:linear-gradient(135deg,var(--teal),var(--teal2));
  border-radius:12px;
  display:flex;align-items:center;justify-content:center;
  font-size:20px;
  box-shadow:0 0 24px rgba(0,201,167,.25);
}
.logo-name{font-size:17px;font-weight:900;letter-spacing:-.3px;}
.logo-name span{color:var(--teal);}
.logo-version{font-size:10px;color:var(--muted);margin-top:2px;}

.nav{flex:1;padding:16px 12px;display:flex;flex-direction:column;gap:4px;overflow-y:auto;}
.nav-section{font-size:10px;color:var(--muted);font-weight:700;letter-spacing:.8px;
  text-transform:uppercase;padding:12px 8px 6px;}
.nav-item{
  display:flex;align-items:center;gap:12px;
  padding:10px 12px;
  border-radius:10px;
  cursor:pointer;
  font-size:13.5px;font-weight:600;
  color:var(--muted);
  transition:all .2s;
  position:relative;
}
.nav-item:hover{background:var(--surface2);color:var(--text);}
.nav-item.active{
  background:rgba(0,201,167,.12);
  color:var(--teal);
}
.nav-item.active::before{
  content:'';position:absolute;right:0;top:50%;transform:translateY(-50%);
  width:3px;height:60%;background:var(--teal);border-radius:2px 0 0 2px;
}
.nav-item .icon{font-size:16px;width:20px;text-align:center;}
.nav-badge{
  margin-right:auto;
  padding:2px 7px;border-radius:100px;
  font-size:10px;font-weight:700;
  background:rgba(255,82,82,.15);color:var(--red);
}
.nav-badge.green{background:rgba(48,209,88,.1);color:var(--green);}

.sidebar-footer{
  padding:16px;
  border-top:1px solid var(--border);
}
.user-card{
  display:flex;align-items:center;gap:10px;
  padding:10px;background:var(--surface2);
  border-radius:10px;cursor:pointer;
}
.user-avatar{
  width:34px;height:34px;border-radius:50%;
  background:linear-gradient(135deg,var(--teal),var(--purple));
  display:flex;align-items:center;justify-content:center;
  font-size:14px;font-weight:700;
}
.user-info .name{font-size:12.5px;font-weight:700;}
.user-info .role{font-size:11px;color:var(--muted);}

/* â•â• MAIN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.main{
  margin-right:var(--sidebar-w);
  flex:1;
  display:flex;flex-direction:column;
  min-height:100vh;
}

/* â•â• TOPBAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.topbar{
  height:60px;
  background:rgba(12,17,32,.9);
  backdrop-filter:blur(20px);
  border-bottom:1px solid var(--border);
  display:flex;align-items:center;justify-content:space-between;
  padding:0 28px;
  position:sticky;top:0;z-index:40;
}
.topbar-title{font-size:16px;font-weight:700;}
.topbar-title span{color:var(--muted);font-weight:400;font-size:13px;margin-right:8px;}
.topbar-actions{display:flex;align-items:center;gap:12px;}
.live-indicator{
  display:flex;align-items:center;gap:7px;
  padding:5px 14px;
  background:rgba(48,209,88,.08);
  border:1px solid rgba(48,209,88,.2);
  border-radius:100px;
  font-size:12px;font-weight:600;color:var(--green);
}
.pulse{width:7px;height:7px;border-radius:50%;background:var(--green);animation:pulse 1.5s infinite;}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1);}50%{opacity:.3;transform:scale(.7);}}

#clockDisplay{
  font-family:'JetBrains Mono',monospace;
  font-size:13px;color:var(--muted);
}
.icon-btn{
  width:36px;height:36px;border-radius:9px;
  background:var(--surface2);border:1px solid var(--border);
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;font-size:16px;
  transition:background .2s;position:relative;
}
.icon-btn:hover{background:var(--surface3);}
.notif-dot{
  position:absolute;top:4px;right:4px;
  width:8px;height:8px;border-radius:50%;
  background:var(--red);border:2px solid var(--surface);
}

/* â•â• CONTENT AREA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.content{padding:24px 28px 60px;flex:1;}
.page{display:none;}
.page.active{display:block;}

/* â•â• SECTION HEADER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.section-header{
  display:flex;align-items:center;justify-content:space-between;
  margin-bottom:24px;
}
.section-header h2{font-size:20px;font-weight:700;}
.section-header p{font-size:13px;color:var(--muted);margin-top:3px;}

/* â•â• KPI STRIP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.kpi-strip{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:14px;
  margin-bottom:22px;
}
.kpi{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:14px;
  padding:18px 16px;
  position:relative;overflow:hidden;
  cursor:default;
  transition:transform .2s,border-color .2s;
}
.kpi:hover{transform:translateY(-2px);border-color:rgba(255,255,255,.12);}
.kpi::before{
  content:'';position:absolute;top:0;right:0;left:0;height:2px;
  background:var(--c,var(--teal));border-radius:2px 2px 0 0;
}
.kpi-label{font-size:11px;color:var(--muted);font-weight:700;letter-spacing:.4px;margin-bottom:10px;}
.kpi-val{
  font-family:'JetBrains Mono',monospace;
  font-size:26px;font-weight:600;
  color:var(--c,var(--teal));
  line-height:1;margin-bottom:5px;
}
.kpi-sub{font-size:11px;color:var(--muted);}
.kpi-badge{
  position:absolute;top:14px;left:14px;
  font-size:11px;font-weight:700;padding:2px 8px;
  border-radius:100px;
}
.badge-up{background:rgba(48,209,88,.1);color:var(--green);}
.badge-down{background:rgba(255,82,82,.1);color:var(--red);}
.badge-eq{background:rgba(246,166,35,.1);color:var(--amber);}
.kpi-bar{height:3px;background:rgba(255,255,255,.07);border-radius:2px;margin-top:10px;overflow:hidden;}
.kpi-bar-fill{height:100%;border-radius:2px;background:var(--c,var(--teal));transition:width .8s ease;}

/* â•â• GRID LAYOUTS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:18px;}
.grid-3{display:grid;grid-template-columns:1.6fr 1fr 1fr;gap:16px;margin-bottom:18px;}
.grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-bottom:18px;}
.span-2{grid-column:span 2;}

/* â•â• CARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.card{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:16px;
  padding:20px;
  overflow:hidden;
}
.card-header{
  display:flex;align-items:center;justify-content:space-between;
  margin-bottom:16px;
}
.card-title{font-size:12px;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;}
.card-tag{
  font-size:10px;font-weight:700;padding:3px 10px;border-radius:100px;
}
.tag-live{background:rgba(0,201,167,.1);color:var(--teal);border:1px solid rgba(0,201,167,.2);}
.tag-alert{background:rgba(255,82,82,.1);color:var(--red);border:1px solid rgba(255,82,82,.2);}
.tag-warn{background:rgba(246,166,35,.1);color:var(--amber);border:1px solid rgba(246,166,35,.2);}
.tag-info{background:rgba(0,152,219,.1);color:var(--teal2);border:1px solid rgba(0,152,219,.2);}

/* â•â• TABLE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.tbl{width:100%;border-collapse:collapse;font-size:13px;}
.tbl th{
  text-align:right;padding:9px 14px;
  font-size:10px;font-weight:700;color:var(--muted);
  text-transform:uppercase;letter-spacing:.5px;
  border-bottom:1px solid var(--border);
}
.tbl td{padding:10px 14px;border-bottom:1px solid rgba(255,255,255,.03);}
.tbl tr:last-child td{border:none;}
.tbl tr:hover td{background:rgba(255,255,255,.018);}
.chip{display:inline-block;padding:3px 10px;border-radius:100px;font-size:10px;font-weight:700;}
.chip-ok{background:rgba(48,209,88,.1);color:var(--green);}
.chip-warn{background:rgba(246,166,35,.1);color:var(--amber);}
.chip-crit{background:rgba(255,82,82,.1);color:var(--red);}
.chip-info{background:rgba(0,152,219,.1);color:var(--teal2);}

/* â•â• BUTTONS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.btn{
  display:inline-flex;align-items:center;gap:8px;
  padding:10px 20px;border-radius:10px;border:none;
  font-family:'Cairo',sans-serif;font-size:13px;font-weight:700;
  cursor:pointer;transition:all .2s;
}
.btn-primary{
  background:linear-gradient(135deg,var(--teal),var(--teal2));
  color:#fff;box-shadow:0 4px 16px rgba(0,201,167,.25);
}
.btn-primary:hover{transform:translateY(-1px);box-shadow:0 8px 24px rgba(0,201,167,.35);}
.btn-secondary{
  background:var(--surface2);border:1px solid var(--border);
  color:var(--text);
}
.btn-secondary:hover{background:var(--surface3);}
.btn-danger{background:rgba(255,82,82,.12);color:var(--red);border:1px solid rgba(255,82,82,.2);}
.btn-sm{padding:7px 14px;font-size:12px;}

/* â•â• ALERT FEED â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.alert-feed{display:flex;flex-direction:column;gap:8px;max-height:300px;overflow-y:auto;}
.alert-feed::-webkit-scrollbar{width:4px;}
.alert-feed::-webkit-scrollbar-thumb{background:var(--surface3);border-radius:2px;}
.alert-item{
  display:flex;gap:12px;align-items:flex-start;
  padding:12px 14px;
  background:rgba(255,255,255,.025);border-radius:10px;
  border-right:3px solid;
  animation:slideIn .3s ease;
}
@keyframes slideIn{from{opacity:0;transform:translateX(10px);}to{opacity:1;transform:translateX(0);}}
.alert-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;margin-top:4px;}
.alert-content .alert-title{font-size:13px;font-weight:600;margin-bottom:2px;}
.alert-content .alert-desc{font-size:11.5px;color:var(--muted);line-height:1.5;}
.alert-time{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--muted);margin-right:auto;white-space:nowrap;}

/* â•â• FORM â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;}
.form-group{display:flex;flex-direction:column;gap:6px;}
.form-group label{font-size:12px;font-weight:700;color:var(--muted);}
.form-group input,.form-group select,.form-group textarea{
  padding:10px 14px;
  background:var(--surface2);
  border:1px solid var(--border);
  border-radius:9px;
  color:var(--text);
  font-family:'Cairo',sans-serif;
  font-size:13px;
  transition:border-color .2s;
  outline:none;
}
.form-group input:focus,.form-group select:focus,.form-group textarea:focus{
  border-color:rgba(0,201,167,.4);
}
.form-group input::placeholder{color:var(--muted);}
.form-group select option{background:var(--surface2);}

/* â•â• PROGRESS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.progress-row{display:flex;align-items:center;gap:12px;margin-bottom:12px;}
.progress-label{font-size:12px;color:var(--muted);width:80px;text-align:left;}
.progress-bar{flex:1;height:6px;background:rgba(255,255,255,.07);border-radius:3px;overflow:hidden;}
.progress-fill{height:100%;border-radius:3px;transition:width .8s ease;}
.progress-val{font-family:'JetBrains Mono',monospace;font-size:12px;font-weight:600;width:44px;text-align:right;}

/* â•â• STATS ROW â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.stat-row{
  display:flex;align-items:center;justify-content:space-between;
  padding:12px 0;border-bottom:1px solid var(--border);
}
.stat-row:last-child{border:none;}
.stat-row .label{font-size:13px;color:var(--muted);}
.stat-row .value{font-size:13px;font-weight:700;}

/* â•â• NOTIFICATIONS PANEL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#notifPanel{
  position:fixed;top:68px;left:24px;
  width:360px;
  background:var(--surface2);
  border:1px solid var(--border);
  border-radius:16px;
  box-shadow:0 20px 60px rgba(0,0,0,.6);
  z-index:200;
  display:none;
  animation:panelIn .2s ease;
}
@keyframes panelIn{from{opacity:0;transform:translateY(-8px);}to{opacity:1;transform:translateY(0);}}
.notif-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:14px 18px;
  border-bottom:1px solid var(--border);
}
.notif-header span{font-size:13px;font-weight:700;}
.notif-list{max-height:360px;overflow-y:auto;}
.notif-item{
  display:flex;gap:12px;padding:14px 18px;
  border-bottom:1px solid var(--border);
  cursor:pointer;transition:background .15s;
}
.notif-item:last-child{border:none;}
.notif-item:hover{background:rgba(255,255,255,.03);}
.notif-icon{
  width:36px;height:36px;border-radius:10px;
  display:flex;align-items:center;justify-content:center;font-size:17px;
  flex-shrink:0;
}
.notif-body .title{font-size:13px;font-weight:600;margin-bottom:3px;}
.notif-body .desc{font-size:11.5px;color:var(--muted);line-height:1.5;}
.notif-body .time{font-size:10px;color:var(--muted);margin-top:4px;}

/* â•â• MODAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.modal-overlay{
  position:fixed;inset:0;
  background:rgba(0,0,0,.7);backdrop-filter:blur(6px);
  z-index:500;display:none;
  align-items:center;justify-content:center;
}
.modal-overlay.open{display:flex;}
.modal{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:20px;
  padding:28px;
  width:560px;max-width:90vw;
  animation:modalIn .25s ease;
}
@keyframes modalIn{from{opacity:0;transform:scale(.96);}to{opacity:1;transform:scale(1);}}
.modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px;}
.modal-title{font-size:17px;font-weight:700;}

/* â•â• TOAST â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.toast-container{position:fixed;bottom:24px;left:24px;z-index:900;display:flex;flex-direction:column;gap:8px;}
.toast{
  display:flex;align-items:center;gap:12px;
  padding:12px 18px;border-radius:12px;
  background:var(--surface2);border:1px solid var(--border);
  font-size:13px;font-weight:600;
  box-shadow:0 8px 30px rgba(0,0,0,.4);
  animation:toastIn .3s ease;
  min-width:280px;
}
@keyframes toastIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
.toast.success{border-color:rgba(48,209,88,.3);color:var(--green);}
.toast.error{border-color:rgba(255,82,82,.3);color:var(--red);}
.toast.info{border-color:rgba(0,201,167,.3);color:var(--teal);}

/* â•â• REPORT PREVIEW â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.report-card{
  background:linear-gradient(135deg,rgba(0,201,167,.06),rgba(0,152,219,.06));
  border:1px solid rgba(0,201,167,.2);
  border-radius:16px;padding:24px;
  display:flex;align-items:center;justify-content:space-between;
  margin-bottom:20px;
}
.report-info h3{font-size:16px;font-weight:700;margin-bottom:6px;}
.report-info p{font-size:13px;color:var(--muted);}
.report-stats{display:flex;gap:24px;}
.report-stat{text-align:center;}
.report-stat .num{font-family:'JetBrains Mono',monospace;font-size:22px;font-weight:700;color:var(--teal);}
.report-stat .lbl{font-size:10px;color:var(--muted);margin-top:2px;}

canvas{max-height:220px;}

/* â•â• SCROLLBAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
::-webkit-scrollbar{width:5px;height:5px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:var(--surface3);border-radius:3px;}

/* â•â• RESPONSIVE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media(max-width:1100px){
  .kpi-strip{grid-template-columns:repeat(3,1fr);}
  .grid-3{grid-template-columns:1fr 1fr;}
}
@media(max-width:768px){
  :root{--sidebar-w:0px;}
  .sidebar{transform:translateX(100%);width:260px;}
  .sidebar.open{transform:translateX(0);}
  .kpi-strip{grid-template-columns:1fr 1fr;}
  .grid-2,.grid-3,.grid-4{grid-template-columns:1fr;}
  .content{padding:16px;}
}
</style>
</head>
<body>

<!-- â•â• SIDEBAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<aside class="sidebar">
  <div class="sidebar-logo">
    <div class="logo-mark">
      <div class="logo-icon">ğŸš‘</div>
      <div>
        <div class="logo-name">Ùˆ<span>ØµÙ„</span></div>
      </div>
    </div>
    <div class="logo-version">Ù…Ù†ØµØ© Ù†Ù‚Ù„ Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„Ø°ÙƒÙŠØ©</div>
  </div>

  <nav class="nav">
    <div class="nav-section">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
    <div class="nav-item active" onclick="navigate('dashboard')">
      <span class="icon">ğŸ“Š</span> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
    </div>
    <div class="nav-item" onclick="navigate('live')">
      <span class="icon">ğŸ“¡</span> Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù„Ø­Ø¸ÙŠØ©
      <span class="nav-badge green">Ø­ÙŠ</span>
    </div>

    <div class="nav-section">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</div>
    <div class="nav-item" onclick="navigate('missions')">
      <span class="icon">ğŸ—‚ï¸</span> Ø³Ø¬Ù„ Ø§Ù„Ù…Ù‡Ø§Ù…
    </div>
    <div class="nav-item" onclick="navigate('entry')">
      <span class="icon">â•</span> Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª
    </div>
    <div class="nav-item" onclick="navigate('centers')">
      <span class="icon">ğŸ¢</span> Ø§Ù„Ù…Ø±Ø§ÙƒØ²
    </div>
    <div class="nav-item" onclick="navigate('paramedics')">
      <span class="icon">ğŸ‘¨â€âš•ï¸</span> Ø§Ù„Ù…Ø³Ø¹ÙÙˆÙ†
    </div>

    <div class="nav-section">Ø§Ù„ØªØ­Ù„ÙŠÙ„ ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
    <div class="nav-item" onclick="navigate('reports')">
      <span class="icon">ğŸ“„</span> Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
    </div>
    <div class="nav-item" onclick="navigate('alerts')">
      <span class="icon">ğŸ””</span> Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
      <span class="nav-badge">3</span>
    </div>
    <div class="nav-item" onclick="navigate('settings')">
      <span class="icon">âš™ï¸</span> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    </div>
  </nav>

  <div class="sidebar-footer">
    <div class="user-card">
      <div class="user-avatar">Ù…</div>
      <div class="user-info">
        <div class="name">Ù…Ø­Ù…Ø¯ Ø§Ù„Ø´Ù‡Ø±ÙŠ</div>
        <div class="role">Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</div>
      </div>
    </div>
  </div>
</aside>

<!-- â•â• MAIN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="main">

  <!-- TOPBAR -->
  <header class="topbar">
    <div class="topbar-title">
      <span id="pageLabel">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</span>
    </div>
    <div class="topbar-actions">
      <div class="live-indicator"><div class="pulse"></div> Ø¨Ø« Ù…Ø¨Ø§Ø´Ø±</div>
      <span id="clockDisplay">--:--:--</span>
      <div class="icon-btn" onclick="toggleNotif()" title="Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª">
        ğŸ””<div class="notif-dot"></div>
      </div>
      <button class="btn btn-primary btn-sm" onclick="navigate('reports');setTimeout(generateReport,200)">
        âš¡ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¢Ù†
      </button>
    </div>
  </header>

  <!-- CONTENT -->
  <div class="content">

    <!-- â•â• PAGE: DASHBOARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="page active" id="page-dashboard">
      <div class="section-header">
        <div>
          <h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
          <p>Ù†Ø¸Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ø¹Ù„Ù‰ Ø¹Ù…Ù„ÙŠØ§Øª Ù†Ù‚Ù„ Ø§Ù„Ù…Ø±Ø¶Ù‰ â€” ÙŠÙ†Ø§ÙŠØ± â€“ Ø¯ÙŠØ³Ù…Ø¨Ø± 2025</p>
        </div>
        <div style="display:flex;gap:10px">
          <button class="btn btn-secondary btn-sm" onclick="refreshData()">ğŸ”„ ØªØ­Ø¯ÙŠØ«</button>
          <button class="btn btn-primary btn-sm" onclick="navigate('entry')">â• Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
        </div>
      </div>

      <!-- KPI STRIP -->
      <div class="kpi-strip">
        <div class="kpi" style="--c:var(--teal)">
          <div class="kpi-badge badge-up">â†‘ +2.3%</div>
          <div class="kpi-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‡Ø§Ù…</div>
          <div class="kpi-val" id="kpi-total">14,169</div>
          <div class="kpi-sub">ÙƒØ§Ù…Ù„ Ø¹Ø§Ù… 2025</div>
          <div class="kpi-bar"><div class="kpi-bar-fill" style="width:85%"></div></div>
        </div>
        <div class="kpi" style="--c:var(--green)">
          <div class="kpi-badge badge-up">âœ… Ø¶Ù…Ù† Ø§Ù„Ù‡Ø¯Ù</div>
          <div class="kpi-label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©</div>
          <div class="kpi-val" id="kpi-resp">14.5<small style="font-size:14px"> Ø¯</small></div>
          <div class="kpi-sub">Ø§Ù„Ù‡Ø¯Ù â‰¤15 Ø¯Ù‚ÙŠÙ‚Ø©</div>
          <div class="kpi-bar"><div class="kpi-bar-fill" style="width:97%;background:var(--green)"></div></div>
        </div>
        <div class="kpi" style="--c:var(--teal2)">
          <div class="kpi-badge badge-up">âœ… Ù…Ù…ØªØ§Ø²</div>
          <div class="kpi-label">ÙˆÙ‚Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</div>
          <div class="kpi-val">5.5<small style="font-size:14px"> Ø¯</small></div>
          <div class="kpi-sub">Ø§Ù„Ù‡Ø¯Ù â‰¤8 Ø¯Ù‚Ø§Ø¦Ù‚</div>
          <div class="kpi-bar"><div class="kpi-bar-fill" style="width:69%;background:var(--teal2)"></div></div>
        </div>
        <div class="kpi" style="--c:var(--red)">
          <div class="kpi-badge badge-down">âš ï¸ Ø­Ø±Ø¬</div>
          <div class="kpi-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ£Ø®ÙŠØ±</div>
          <div class="kpi-val">95.3%</div>
          <div class="kpi-sub">ÙŠØ­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£Ù‡Ø¯Ø§Ù</div>
          <div class="kpi-bar"><div class="kpi-bar-fill" style="width:95%;background:var(--red)"></div></div>
        </div>
        <div class="kpi" style="--c:var(--amber)">
          <div class="kpi-badge badge-eq">â†’ Ù…Ø³ØªÙ‚Ø±</div>
          <div class="kpi-label">Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</div>
          <div class="kpi-val">35.1%</div>
          <div class="kpi-sub">4,978 Ø­Ø§Ù„Ø© Ø¥Ù†Ù‚Ø§Ø°</div>
          <div class="kpi-bar"><div class="kpi-bar-fill" style="width:35%;background:var(--amber)"></div></div>
        </div>
      </div>

      <!-- CHARTS ROW -->
      <div class="grid-3">
        <div class="card">
          <div class="card-header">
            <span class="card-title">Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</span>
            <span class="card-tag tag-live">2025</span>
          </div>
          <canvas id="chart-monthly"></canvas>
        </div>
        <div class="card">
          <div class="card-header">
            <span class="card-title">Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</span>
            <span class="card-tag tag-info">ØªÙˆØ²ÙŠØ¹</span>
          </div>
          <canvas id="chart-reasons"></canvas>
        </div>
        <div class="card">
          <div class="card-header">
            <span class="card-title">Ù†ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</span>
            <span class="card-tag tag-warn">Ù…Ø±Ø§Ù‚Ø¨Ø©</span>
          </div>
          <canvas id="chart-types"></canvas>
        </div>
      </div>

      <!-- BOTTOM ROW -->
      <div class="grid-2">
        <div class="card">
          <div class="card-header">
            <span class="card-title">Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø±Ø§ÙƒØ²</span>
            <span class="card-tag tag-alert">3 ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</span>
          </div>
          <table class="tbl">
            <thead><tr>
              <th>Ø§Ù„Ù…Ø±ÙƒØ²</th><th>Ø§Ù„Ù…Ù‡Ø§Ù…</th><th>Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©</th><th>Ø§Ù„ØªØ£Ø®ÙŠØ±</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
            </tr></thead>
            <tbody id="dashboard-centers"></tbody>
          </table>
        </div>
        <div class="card">
          <div class="card-header">
            <span class="card-title">ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù†Ø´Ø·Ø©</span>
            <span class="card-tag tag-alert">3 Ø¬Ø¯ÙŠØ¯Ø©</span>
          </div>
          <div class="alert-feed" id="dashboard-alerts"></div>
        </div>
      </div>
    </div>

    <!-- â•â• PAGE: LIVE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="page" id="page-live">
      <div class="section-header">
        <div><h2>ğŸ“¡ Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù„Ø­Ø¸ÙŠØ©</h2><p>ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 5 Ø«ÙˆØ§Ù†Ù</p></div>
        <div class="live-indicator"><div class="pulse"></div> Ù…ØªØµÙ„</div>
      </div>

      <div class="kpi-strip">
        <div class="kpi" style="--c:var(--teal)">
          <div class="kpi-label">Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…</div>
          <div class="kpi-val" id="live-today">0</div>
          <div class="kpi-sub">Ù…Ù†Ø° Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ÙˆØ±Ø¯ÙŠØ©</div>
        </div>
        <div class="kpi" style="--c:var(--red)">
          <div class="kpi-label">Ø·ÙˆØ§Ø±Ø¦ Ù†Ø´Ø·Ø©</div>
          <div class="kpi-val" id="live-emergency">0</div>
          <div class="kpi-sub">ØªØ­ØªØ§Ø¬ ØªØ¯Ø®Ù„Ø§Ù‹</div>
        </div>
        <div class="kpi" style="--c:var(--green)">
          <div class="kpi-label">Ù…Ø³Ø¹ÙÙˆÙ† Ù…ØªØ§Ø­ÙˆÙ†</div>
          <div class="kpi-val" id="live-available">0</div>
          <div class="kpi-sub">Ù…Ù† Ø£ØµÙ„ 219</div>
        </div>
        <div class="kpi" style="--c:var(--amber)">
          <div class="kpi-label">Ø³ÙŠØ§Ø±Ø§Øª ÙÙŠ Ø§Ù„Ù…ÙŠØ¯Ø§Ù†</div>
          <div class="kpi-val" id="live-ambulances">0</div>
          <div class="kpi-sub">Ù…Ù† Ø£ØµÙ„ 96</div>
        </div>
        <div class="kpi" style="--c:var(--teal2)">
          <div class="kpi-label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©</div>
          <div class="kpi-val" id="live-resp">0<small style="font-size:14px"> Ø¯</small></div>
          <div class="kpi-sub">Ø¢Ø®Ø± Ø³Ø§Ø¹Ø©</div>
        </div>
      </div>

      <div class="grid-2">
        <div class="card">
          <div class="card-header">
            <span class="card-title">Ù†Ø´Ø§Ø· Ø§Ù„Ù…Ø±Ø§ÙƒØ² â€” Ø§Ù„ÙŠÙˆÙ…</span>
            <span class="card-tag tag-live">Ù„Ø­Ø¸ÙŠ</span>
          </div>
          <canvas id="chart-live-centers"></canvas>
        </div>
        <div class="card">
          <div class="card-header">
            <span class="card-title">Ø³Ø¬Ù„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</span>
            <span class="card-tag tag-live">Ø¨Ø« Ù…Ø¨Ø§Ø´Ø±</span>
          </div>
          <div class="alert-feed" id="live-feed"></div>
        </div>
      </div>
    </div>

    <!-- â•â• PAGE: MISSIONS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="page" id="page-missions">
      <div class="section-header">
        <div><h2>Ø³Ø¬Ù„ Ø§Ù„Ù…Ù‡Ø§Ù…</h2><p>14,169 Ù…Ù‡Ù…Ø© Ù…Ø³Ø¬Ù„Ø©</p></div>
        <div style="display:flex;gap:8px">
          <input style="padding:8px 14px;background:var(--surface2);border:1px solid var(--border);border-radius:9px;color:var(--text);font-family:'Cairo',sans-serif;font-size:13px;outline:none;width:220px" placeholder="ğŸ” Ø¨Ø­Ø«..."/>
          <button class="btn btn-primary btn-sm" onclick="navigate('entry')">â• Ø¥Ø¶Ø§ÙØ©</button>
        </div>
      </div>
      <div class="card">
        <table class="tbl" id="missions-table">
          <thead><tr>
            <th>Ø±Ù‚Ù… Ø§Ù„Ù…Ù‡Ù…Ø©</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ù‚Ø³Ù…</th><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø§Ù„Ù…Ø±ÙƒØ²</th>
            <th>Ø§Ù„Ù…Ø³Ø¹Ù</th><th>ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©</th><th>Ø§Ù„Ø£Ø¯Ø§Ø¡</th><th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
          </tr></thead>
          <tbody id="missions-body"></tbody>
        </table>
      </div>
    </div>

    <!-- â•â• PAGE: DATA ENTRY â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="page" id="page-entry">
      <div class="section-header">
        <div><h2>Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2><p>Ø£Ø¶Ù Ù…Ù‡Ù…Ø© Ù†Ù‚Ù„ Ù…Ø±ÙŠØ¶ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø£Ùˆ Ø§Ø³ØªÙˆØ±Ø¯ Ù…Ù† Excel</p></div>
      </div>

      <div class="grid-2" style="margin-bottom:20px">
        <div class="card">
          <div class="card-header">
            <span class="card-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø©</span>
            <span class="card-tag tag-info">Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ</span>
          </div>
          <form id="missionForm" style="display:flex;flex-direction:column;gap:14px">
            <div class="form-grid">
              <div class="form-group">
                <label>Ø±Ù‚Ù… Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</label>
                <input type="text" placeholder="100170" id="f-ref"/>
              </div>
              <div class="form-group">
                <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</label>
                <input type="date" id="f-date"/>
              </div>
              <div class="form-group">
                <label>Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø·Ø¨ÙŠ</label>
                <select id="f-dept">
                  <option>Ù‚Ù„Ø¨</option><option>Ø£Ø¹ØµØ§Ø¨</option><option>Ø¬Ø±Ø§Ø­Ø© Ø¹Ø¸Ø§Ù…</option>
                  <option>Ø£Ø·ÙØ§Ù„</option><option>Ø¹Ù†Ø§ÙŠØ© Ù…Ø±ÙƒØ²Ø©</option><option>Ø·ÙˆØ§Ø±Ø¦</option>
                  <option>Ø£ÙˆØ±Ø§Ù…</option><option>Ø±Ø¦Ø©</option><option>Ø¬Ù‡Ø§Ø² Ù‡Ø¶Ù…ÙŠ</option><option>Ø¹Ø§Ù…</option>
                </select>
              </div>
              <div class="form-group">
                <label>Ù†ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„Ø©</label>
                <select id="f-type">
                  <option value="Life-Saving">Ø¥Ù†Ù‚Ø§Ø° Ø­ÙŠØ§Ø©</option>
                  <option value="Stable">Ù…Ø³ØªÙ‚Ø±Ø©</option>
                </select>
              </div>
              <div class="form-group">
                <label>Ø§Ù„Ù…Ø±ÙƒØ²</label>
                <select id="f-center">
                  <option>C1</option><option>C2</option><option>C3</option><option>C4</option>
                  <option>C5</option><option>C6</option><option>C7</option><option>C8</option>
                </select>
              </div>
              <div class="form-group">
                <label>Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„</label>
                <select id="f-hospital">
                  <option>H1</option><option>H2</option><option>H3</option><option>H4</option>
                </select>
              </div>
              <div class="form-group">
                <label>Ø³Ø¨Ø¨ Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</label>
                <select id="f-reason">
                  <option>ÙƒØ§Ø« Ù„Ø§Ø¨</option><option>Ù†Ù‚Øµ ØªØ®ØµØµÙŠ</option><option>Ù†Ù‚Øµ Ù…Ø¹Ø¯Ø§Øª</option>
                </select>
              </div>
              <div class="form-group">
                <label>ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© (Ø¯Ù‚ÙŠÙ‚Ø©)</label>
                <input type="number" placeholder="14.5" id="f-resp"/>
              </div>
            </div>
            <div style="display:flex;gap:10px;margin-top:6px">
              <button type="button" class="btn btn-primary" onclick="submitMission()">âœ… Ø­ÙØ¸ Ø§Ù„Ù…Ù‡Ù…Ø©</button>
              <button type="reset" class="btn btn-secondary">Ù…Ø³Ø­</button>
            </div>
          </form>
        </div>

        <div class="card">
          <div class="card-header">
            <span class="card-title">Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Excel</span>
            <span class="card-tag tag-info">Ø±ÙØ¹ Ù…Ù„Ù</span>
          </div>
          <div style="text-align:center;padding:30px 20px">
            <div style="font-size:48px;margin-bottom:16px">ğŸ“‚</div>
            <p style="color:var(--muted);font-size:13px;margin-bottom:20px">
              Ø§Ø±ÙØ¹ Ù…Ù„Ù Excel Ø£Ùˆ CSV Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù‡Ø§Ù… Ù…ØªØ¹Ø¯Ø¯Ø© Ø¯ÙØ¹Ø© ÙˆØ§Ø­Ø¯Ø©
            </p>
            <div style="border:2px dashed var(--border);border-radius:12px;padding:24px;margin-bottom:16px;cursor:pointer"
                 ondragover="event.preventDefault()" ondrop="handleDrop(event)">
              <p style="color:var(--muted);font-size:13px">Ø§Ø³Ø­Ø¨ Ø§Ù„Ù…Ù„Ù Ù‡Ù†Ø§ Ø£Ùˆ</p>
              <label style="cursor:pointer">
                <input type="file" accept=".xlsx,.csv" style="display:none" onchange="handleFileUpload(this)"/>
                <span class="btn btn-secondary btn-sm" style="display:inline-flex;margin-top:10px">Ø§Ø®ØªØ± Ù…Ù„Ù</span>
              </label>
            </div>
            <div id="upload-status" style="font-size:13px;color:var(--muted)">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ù Ù…Ø­Ø¯Ø¯</div>
          </div>

          <div style="margin-top:8px;padding-top:16px;border-top:1px solid var(--border)">
            <div class="card-title" style="margin-bottom:12px">Ø¢Ø®Ø± 5 Ù…Ø¯Ø®Ù„Ø§Øª</div>
            <div id="recent-entries" style="display:flex;flex-direction:column;gap:8px"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- â•â• PAGE: CENTERS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="page" id="page-centers">
      <div class="section-header">
        <div><h2>Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø±Ø§ÙƒØ²</h2><p>20 Ù…Ø±ÙƒØ² Ù†Ø´Ø· Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø´Ø¨ÙƒØ©</p></div>
      </div>
      <div class="grid-2" style="margin-bottom:16px">
        <div class="card">
          <div class="card-header">
            <span class="card-title">Ø§Ù„Ù…Ø±Ø§ÙƒØ² Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø£Ø¯Ø§Ø¡Ù‹</span>
            <span class="card-tag tag-live">2025</span>
          </div>
          <canvas id="chart-centers-bar"></canvas>
        </div>
        <div class="card">
          <div class="card-header">
            <span class="card-title">Ù…Ø¹Ø¯Ù„Ø§Øª Ø§Ù„ØªØ£Ø®ÙŠØ±</span>
            <span class="card-tag tag-alert">ÙŠØ­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø©</span>
          </div>
          <div style="padding:8px 0" id="centers-progress"></div>
        </div>
      </div>
      <div class="card">
        <table class="tbl">
          <thead><tr>
            <th>Ø§Ù„Ù…Ø±ÙƒØ²</th><th>Ø§Ù„Ù…Ù‡Ø§Ù…</th><th>Ø§Ù„Ù…Ø³Ø¹ÙÙˆÙ†</th><th>Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¥Ø³Ø¹Ø§Ù</th>
            <th>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©</th><th>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</th><th>Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ£Ø®ÙŠØ±</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
          </tr></thead>
          <tbody id="centers-body"></tbody>
        </table>
      </div>
    </div>

    <!-- â•â• PAGE: PARAMEDICS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="page" id="page-paramedics">
      <div class="section-header">
        <div><h2>Ø§Ù„Ù…Ø³Ø¹ÙÙˆÙ†</h2><p>219 Ù…Ø³Ø¹Ù Ù†Ø´Ø·</p></div>
      </div>
      <div class="grid-4" style="margin-bottom:20px">
        <div class="kpi" style="--c:var(--teal)">
          <div class="kpi-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³Ø¹ÙÙŠÙ†</div>
          <div class="kpi-val">219</div>
          <div class="kpi-sub">Ù…ÙˆØ²Ø¹ÙˆÙ† Ø¹Ù„Ù‰ 20 Ù…Ø±ÙƒØ²</div>
        </div>
        <div class="kpi" style="--c:var(--green)">
          <div class="kpi-label">Ù…ØªØ§Ø­ÙˆÙ† Ø§Ù„Ø¢Ù†</div>
          <div class="kpi-val" id="para-available">143</div>
          <div class="kpi-sub">Ø¬Ø§Ù‡Ø²ÙˆÙ† Ù„Ù„Ø§Ù†ØªØ´Ø§Ø±</div>
        </div>
        <div class="kpi" style="--c:var(--amber)">
          <div class="kpi-label">ÙÙŠ Ù…Ù‡Ù…Ø©</div>
          <div class="kpi-val" id="para-onmission">67</div>
          <div class="kpi-sub">Ù…Ù†ØªØ´Ø±ÙˆÙ† Ø­Ø§Ù„ÙŠØ§Ù‹</div>
        </div>
        <div class="kpi" style="--c:var(--red)">
          <div class="kpi-label">Ø¥Ø¬Ø§Ø²Ø© / ØºÙŠØ± Ù…ØªØ§Ø­</div>
          <div class="kpi-val">9</div>
          <div class="kpi-sub">Ø®Ø§Ø±Ø¬ Ø§Ù„Ø®Ø¯Ù…Ø©</div>
        </div>
      </div>
      <div class="card">
        <table class="tbl">
          <thead><tr>
            <th>Ø§Ù„Ù…Ø³Ø¹Ù</th><th>Ø§Ù„Ù…Ø±ÙƒØ²</th><th>Ø§Ù„Ù…Ù‡Ø§Ù…</th><th>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©</th>
            <th>Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø£Ø¯Ø§Ø¡</th><th>Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
          </tr></thead>
          <tbody id="paramedics-body"></tbody>
        </table>
      </div>
    </div>

    <!-- â•â• PAGE: REPORTS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="page" id="page-reports">
      <div class="section-header">
        <div><h2>Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h2><p>ØªÙˆÙ„ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙˆØ¥Ø±Ø³Ø§Ù„ ÙÙˆØ±ÙŠ</p></div>
      </div>

      <div class="report-card">
        <div class="report-info">
          <h3>ğŸ“Š Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</h3>
          <p>ÙŠÙÙ†Ø´Ø¦ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„ â€” Ø£Ùˆ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙˆÙ„ÙŠØ¯Ù‡ Ø§Ù„Ø¢Ù†</p>
        </div>
        <div class="report-stats">
          <div class="report-stat"><div class="num" id="report-countdown">00:00:00</div><div class="lbl">Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù‚Ø§Ø¯Ù…</div></div>
          <div class="report-stat"><div class="num">14</div><div class="lbl">ØªÙ‚Ø±ÙŠØ±Ø§Ù‹ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</div></div>
          <div class="report-stat"><div class="num">219</div><div class="lbl">Ù…Ø³Ø¹ÙØ§Ù‹ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©</div></div>
        </div>
        <div style="display:flex;gap:10px">
          <button class="btn btn-primary" onclick="generateReport()">âš¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¢Ù†</button>
          <button class="btn btn-secondary btn-sm" onclick="showToast('ØªÙ… Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± Make.com','info')">ğŸ“¤ Ø¬Ø¯ÙˆÙ„Ø©</button>
        </div>
      </div>

      <div class="grid-2">
        <div class="card">
          <div class="card-header">
            <span class="card-title">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>
            <span class="card-tag tag-info">Make.com</span>
          </div>
          <div style="display:flex;flex-direction:column;gap:14px">
            <div class="form-group">
              <label>ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</label>
              <select>
                <option>ÙŠÙˆÙ…ÙŠ â€” Ø§Ù„Ø³Ø§Ø¹Ø© 7:00 ØµØ¨Ø§Ø­Ø§Ù‹</option>
                <option>Ø£Ø³Ø¨ÙˆØ¹ÙŠ â€” Ø§Ù„Ø£Ø­Ø¯</option>
                <option>Ù„Ø­Ø¸ÙŠ â€” Ø¹Ù†Ø¯ ÙƒÙ„ Ø­Ø¯Ø«</option>
              </select>
            </div>
            <div class="form-group">
              <label>Ù‚Ù†Ø§Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</label>
              <select>
                <option>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</option>
                <option>ÙˆØ§ØªØ³Ø§Ø¨ (Make.com)</option>
                <option>Slack</option>
                <option>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚Ù†ÙˆØ§Øª</option>
              </select>
            </div>
            <div class="form-group">
              <label>Ø§Ù„Ù…Ø³ØªÙ„Ù…ÙˆÙ†</label>
              <input type="text" placeholder="team@hospital.comØŒ +966..." value="ops@meditrans.sa"/>
            </div>
            <div class="form-group">
              <label>Ù„ØºØ© Ø§Ù„ØªÙ‚Ø±ÙŠØ±</label>
              <select><option>Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option><option>Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</option><option>Ø«Ù†Ø§Ø¦ÙŠ</option></select>
            </div>
            <button class="btn btn-primary btn-sm" onclick="showToast('ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Make.com âœ…','success')">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <span class="card-title">Ø³Ø¬Ù„ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</span>
          </div>
          <div id="reports-history" style="display:flex;flex-direction:column;gap:8px"></div>
        </div>
      </div>
    </div>

    <!-- â•â• PAGE: ALERTS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="page" id="page-alerts">
      <div class="section-header">
        <div><h2>Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</h2><p>3 ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ù†Ø´Ø·Ø© ØªØ­ØªØ§Ø¬ ØªØ¯Ø®Ù„Ø§Ù‹</p></div>
        <button class="btn btn-secondary btn-sm" onclick="showToast('ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙƒÙ…Ù‚Ø±ÙˆØ¡Ø©','info')">âœ“ ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙƒÙ„ Ù…Ù‚Ø±ÙˆØ¡</button>
      </div>
      <div style="display:flex;flex-direction:column;gap:12px" id="alerts-full"></div>
    </div>

    <!-- â•â• PAGE: SETTINGS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="page" id="page-settings">
      <div class="section-header">
        <div><h2>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2><p>ØªØ®ØµÙŠØµ Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ¥Ø¹Ø¯Ø§Ø¯Ø§Øª Make.com</p></div>
      </div>
      <div class="grid-2">
        <div class="card">
          <div class="card-header"><span class="card-title">Ø­Ø¯ÙˆØ¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</span><span class="card-tag tag-warn">KPI</span></div>
          <div style="display:flex;flex-direction:column;gap:14px">
            <div class="form-group">
              <label>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© (Ø¯Ù‚ÙŠÙ‚Ø©)</label>
              <input type="number" value="15" id="threshold-resp"/>
            </div>
            <div class="form-group">
              <label>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„ÙˆÙ‚Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ (Ø¯Ù‚ÙŠÙ‚Ø©)</label>
              <input type="number" value="8" id="threshold-dispatch"/>
            </div>
            <div class="form-group">
              <label>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ£Ø®ÙŠØ± (%)</label>
              <input type="number" value="95" id="threshold-late"/>
            </div>
            <div class="form-group">
              <label>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ù…Ø³Ø¹ÙÙŠÙ† Ø§Ù„Ù…ØªØ§Ø­ÙŠÙ†</label>
              <input type="number" value="100" id="threshold-para"/>
            </div>
            <button class="btn btn-primary btn-sm" onclick="showToast('ØªÙ… Ø­ÙØ¸ Ø­Ø¯ÙˆØ¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ âœ…','success')">ğŸ’¾ Ø­ÙØ¸</button>
          </div>
        </div>
        <div class="card">
          <div class="card-header"><span class="card-title">ØªÙƒØ§Ù…Ù„ Make.com</span><span class="card-tag tag-info">Webhook</span></div>
          <div style="display:flex;flex-direction:column;gap:14px">
            <div class="form-group">
              <label>Webhook URL</label>
              <input type="text" placeholder="https://hook.make.com/..." value="https://hook.make.com/xxxxxx"/>
            </div>
            <div class="form-group">
              <label>Google Sheets ID</label>
              <input type="text" placeholder="1BxiMVs..." value="1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgVE2upms"/>
            </div>
            <div class="form-group">
              <label>Gmail Ø§Ù„Ù…Ø±Ø³Ù„</label>
              <input type="email" value="ops@meditrans.sa"/>
            </div>
            <div style="display:flex;gap:8px">
              <button class="btn btn-primary btn-sm" onclick="testWebhook()">ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø±</button>
              <button class="btn btn-secondary btn-sm" onclick="showToast('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª âœ…','success')">ğŸ’¾ Ø­ÙØ¸</button>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div><!-- /content -->
</div><!-- /main -->

<!-- NOTIFICATIONS PANEL -->
<div id="notifPanel">
  <div class="notif-header">
    <span>ğŸ”” Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</span>
    <button class="btn btn-secondary btn-sm" onclick="toggleNotif()">Ø¥ØºÙ„Ø§Ù‚ âœ•</button>
  </div>
  <div class="notif-list">
    <div class="notif-item">
      <div class="notif-icon" style="background:rgba(255,82,82,.12)">ğŸš¨</div>
      <div class="notif-body">
        <div class="title">Ù…Ø±ÙƒØ² C6 â€” Ù…Ø¹Ø¯Ù„ ØªØ£Ø®ÙŠØ± Ø­Ø±Ø¬</div>
        <div class="desc">ÙˆØµÙ„ Ø¥Ù„Ù‰ 96.4% â€” ÙŠØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ 95%</div>
        <div class="time">Ù…Ù†Ø° 5 Ø¯Ù‚Ø§Ø¦Ù‚</div>
      </div>
    </div>
    <div class="notif-item">
      <div class="notif-icon" style="background:rgba(246,166,35,.12)">âš¡</div>
      <div class="notif-body">
        <div class="title">Ø¶ØºØ· Ø§Ù„ÙˆØ±Ø¯ÙŠØ© Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©</div>
        <div class="desc">60.1% Ù…Ù† Ø§Ù„Ù…Ù‡Ø§Ù… ÙÙŠ Ø§Ù„ØµØ¨Ø§Ø­ â€” ÙŠÙÙˆØµÙ‰ Ø¨ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø·Ø§Ù‚Ù…</div>
        <div class="time">Ù…Ù†Ø° Ø³Ø§Ø¹Ø©</div>
      </div>
    </div>
    <div class="notif-item">
      <div class="notif-icon" style="background:rgba(0,152,219,.12)">ğŸ¥</div>
      <div class="notif-body">
        <div class="title">H1 â€” ØªØ±ÙƒÙ‘Ø² Ø¹Ø§Ù„Ù</div>
        <div class="desc">ÙŠØ³ØªÙ‚Ø¨Ù„ 72.1% Ù…Ù† Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª â€” Ø®Ø·Ø± Ø§Ø®ØªÙ†Ø§Ù‚</div>
        <div class="time">Ù…Ù†Ø° 3 Ø³Ø§Ø¹Ø§Øª</div>
      </div>
    </div>
    <div class="notif-item">
      <div class="notif-icon" style="background:rgba(48,209,88,.12)">âœ…</div>
      <div class="notif-body">
        <div class="title">ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ… Ø£Ù…Ø³ Ø¬Ø§Ù‡Ø²</div>
        <div class="desc">ØªÙ… ØªÙˆÙ„ÙŠØ¯Ù‡ ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡ Ù„Ù„ÙØ±ÙŠÙ‚ Ø¹Ø¨Ø± Make.com</div>
        <div class="time">Ø£Ù…Ø³ 7:02 ØµØ¨Ø§Ø­Ø§Ù‹</div>
      </div>
    </div>
  </div>
</div>

<!-- TOAST CONTAINER -->
<div class="toast-container" id="toastContainer"></div>

<script>
// â•â• DATA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CENTERS_DATA = [
  {id:'C1',missions:1438,paramedics:20,ambulances:10,resp:14.7,dispatch:5.5,late:94.5},
  {id:'C2',missions:1434,paramedics:18,ambulances:9,resp:14.6,dispatch:5.6,late:94.7},
  {id:'C3',missions:1273,paramedics:17,ambulances:8,resp:14.5,dispatch:5.5,late:95.1},
  {id:'C4',missions:1109,paramedics:16,ambulances:8,resp:14.3,dispatch:5.4,late:95.2},
  {id:'C5',missions:1095,paramedics:15,ambulances:7,resp:14.4,dispatch:5.5,late:94.6},
  {id:'C6',missions:742, paramedics:14,ambulances:6,resp:14.4,dispatch:5.4,late:96.4},
  {id:'C7',missions:695, paramedics:13,ambulances:6,resp:14.3,dispatch:5.5,late:95.3},
  {id:'C8',missions:742, paramedics:12,ambulances:5,resp:14.6,dispatch:5.6,late:95.3},
  {id:'C9',missions:715, paramedics:11,ambulances:5,resp:14.5,dispatch:5.4,late:96.1},
  {id:'C10',missions:555,paramedics:10,ambulances:5,resp:14.7,dispatch:5.5,late:96.2},
];

const PARAMEDICS_DATA = Array.from({length:20},(_,i)=>({
  id:`E${i+1}`, center:`C${Math.ceil((i+1)/2)}`,
  missions: Math.floor(Math.random()*30)+50,
  resp: (13+Math.random()*3).toFixed(1),
  good: (Math.random()*8+1).toFixed(1),
  emergency: Math.floor(Math.random()*15)+15,
  status: Math.random()>.3 ? 'Ù…ØªØ§Ø­' : Math.random()>.5 ? 'ÙÙŠ Ù…Ù‡Ù…Ø©' : 'Ø§Ø³ØªØ±Ø§Ø­Ø©'
}));

const MISSIONS_SAMPLE = Array.from({length:15},(_,i)=>({
  ref: `#${100001+i}`,
  date: `2025-12-${String(i+1).padStart(2,'0')}`,
  dept: ['Ù‚Ù„Ø¨','Ø£Ø¹ØµØ§Ø¨','Ø£Ø·ÙØ§Ù„','Ø·ÙˆØ§Ø±Ø¦','Ø£ÙˆØ±Ø§Ù…'][i%5],
  type: i%3===0 ? 'Ø¥Ù†Ù‚Ø§Ø° Ø­ÙŠØ§Ø©' : 'Ù…Ø³ØªÙ‚Ø±Ø©',
  center: `C${(i%10)+1}`,
  para: `E${(i%20)+1}`,
  resp: (13+Math.random()*3).toFixed(1),
  perf: Math.random()>.1 ? 'Ù…ØªØ£Ø®Ø±' : 'Ø¬ÙŠØ¯'
}));

const MONTHLY = [1227,1087,1207,1157,1202,1167,1191,1189,1157,1209,1185,1191];
const MONTHS  = ['ÙŠÙ†Ø§ÙŠØ±','ÙØ¨Ø±Ø§ÙŠØ±','Ù…Ø§Ø±Ø³','Ø£Ø¨Ø±ÙŠÙ„','Ù…Ø§ÙŠÙˆ','ÙŠÙˆÙ†ÙŠÙˆ','ÙŠÙˆÙ„ÙŠÙˆ','Ø£ØºØ³Ø·Ø³','Ø³Ø¨ØªÙ…Ø¨Ø±','Ø£ÙƒØªÙˆØ¨Ø±','Ù†ÙˆÙÙ…Ø¨Ø±','Ø¯ÙŠØ³Ù…Ø¨Ø±'];
const FEED_POOL = [
  {c:'var(--red)',   t:'Ù…Ù‡Ù…Ø© Ø·ÙˆØ§Ø±Ø¦',        d:'Ù…Ø±ÙƒØ² C1 â€” Ù‚Ø³Ù… Ø§Ù„Ù‚Ù„Ø¨ â†’ H1'},
  {c:'var(--green)', t:'Ù…Ù‡Ù…Ø© Ù…ÙƒØªÙ…Ù„Ø©',       d:'Ù…Ø±ÙƒØ² C3 â€” 138 Ø¯Ù‚ÙŠÙ‚Ø©'},
  {c:'var(--teal2)', t:'Ø¥Ø±Ø³Ø§Ù„ Ø³ÙŠØ§Ø±Ø© Ø¥Ø³Ø¹Ø§Ù', d:'A19 â† Ù…Ø±ÙŠØ¶ Ù…Ø³ØªÙ‚Ø± â€” C2'},
  {c:'var(--amber)', t:'ØªØ¬Ø§ÙˆØ² ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©',d:'Ù…Ø±ÙƒØ² C6 â€” 18.2 Ø¯Ù‚ÙŠÙ‚Ø©'},
  {c:'var(--green)', t:'Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ø±ÙƒØ²',        d:'E81 â€” Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„Ù…Ù‡Ù…Ø©'},
  {c:'var(--red)',   t:'Ø­Ø§Ù„Ø© Ø¥Ù†Ù‚Ø§Ø° Ø­ÙŠØ§Ø©',   d:'Ù…Ø±ÙƒØ² C5 â€” Ù‚Ø³Ù… Ø§Ù„Ø£Ø¹ØµØ§Ø¨'},
];

const recentEntries = [];

// â•â• CHART DEFAULTS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Chart.defaults.color = '#5E7391';
Chart.defaults.font.family = "'Cairo', sans-serif";
const G = 'rgba(255,255,255,0.045)';

// â•â• INITIALIZE CHARTS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initCharts() {
  // Monthly
  new Chart('chart-monthly',{type:'bar',data:{
    labels:MONTHS,
    datasets:[{label:'Ø§Ù„Ù…Ù‡Ø§Ù…',data:MONTHLY,
      backgroundColor:MONTHS.map((_,i)=>i===11?'rgba(0,201,167,.75)':'rgba(0,201,167,.2)'),
      borderColor:'rgba(0,201,167,.6)',borderWidth:1,borderRadius:5}]
  },options:{plugins:{legend:{display:false}},scales:{x:{grid:{color:G}},y:{grid:{color:G},min:1000}}}});

  // Reasons
  new Chart('chart-reasons',{type:'doughnut',data:{
    labels:['Ù†Ù‚Øµ ØªØ®ØµØµÙŠ','Ù†Ù‚Øµ Ù…Ø¹Ø¯Ø§Øª','ÙƒØ§Ø« Ù„Ø§Ø¨'],
    datasets:[{data:[4802,4715,4652],
      backgroundColor:['rgba(0,201,167,.7)','rgba(124,92,252,.7)','rgba(246,166,35,.7)'],
      borderColor:['#00C9A7','#BF5AF2','#F6A623'],borderWidth:2,hoverOffset:6}]
  },options:{cutout:'65%',plugins:{legend:{position:'bottom',labels:{padding:12,font:{size:11}}}}}});

  // Types
  new Chart('chart-types',{type:'doughnut',data:{
    labels:['Ù…Ø³ØªÙ‚Ø±Ø©','Ø¥Ù†Ù‚Ø§Ø° Ø­ÙŠØ§Ø©'],
    datasets:[{data:[9191,4978],
      backgroundColor:['rgba(48,209,88,.65)','rgba(255,82,82,.65)'],
      borderColor:['#30D158','#FF5252'],borderWidth:2,hoverOffset:6}]
  },options:{cutout:'60%',plugins:{legend:{position:'bottom',labels:{padding:12,font:{size:11}}}}}});

  // Centers bar (top 8)
  new Chart('chart-centers-bar',{type:'bar',data:{
    labels:CENTERS_DATA.slice(0,8).map(c=>c.id),
    datasets:[{label:'Ø§Ù„Ù…Ù‡Ø§Ù…',data:CENTERS_DATA.slice(0,8).map(c=>c.missions),
      backgroundColor:'rgba(0,201,167,.25)',borderColor:'rgba(0,201,167,.7)',
      borderWidth:1.5,borderRadius:5}]
  },options:{indexAxis:'y',plugins:{legend:{display:false}},
    scales:{x:{grid:{color:G}},y:{grid:{display:false}}}}});

  // Live centers (will update)
  new Chart('chart-live-centers',{type:'bar',data:{
    labels:CENTERS_DATA.slice(0,10).map(c=>c.id),
    datasets:[{label:'Ø§Ù„ÙŠÙˆÙ…',data:CENTERS_DATA.slice(0,10).map(c=>Math.floor(c.missions/365*Math.random()*2+2)),
      backgroundColor:'rgba(0,152,219,.3)',borderColor:'rgba(0,152,219,.8)',
      borderWidth:1.5,borderRadius:4}]
  },options:{plugins:{legend:{display:false}},scales:{x:{grid:{color:G}},y:{grid:{color:G},beginAtZero:true}}}});
}

// â•â• RENDER TABLES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderDashboardCenters() {
  const tbody = document.getElementById('dashboard-centers');
  tbody.innerHTML = CENTERS_DATA.slice(0,8).map(c=>`<tr>
    <td><strong>${c.id}</strong></td>
    <td>${c.missions.toLocaleString('ar')}</td>
    <td style="font-family:'JetBrains Mono',monospace">${c.resp}</td>
    <td style="font-family:'JetBrains Mono',monospace;color:${c.late>96?'var(--red)':c.late>95?'var(--amber)':'var(--text)'}">${c.late}%</td>
    <td><span class="chip ${c.late>96?'chip-crit':c.late>95?'chip-warn':'chip-ok'}">${c.late>96?'Ø­Ø±Ø¬':c.late>95?'ØªØ­Ø°ÙŠØ±':'Ø·Ø¨ÙŠØ¹ÙŠ'}</span></td>
  </tr>`).join('');
}

function renderAllCenters() {
  const tbody = document.getElementById('centers-body');
  tbody.innerHTML = CENTERS_DATA.map(c=>`<tr>
    <td><strong>${c.id}</strong></td>
    <td>${c.missions.toLocaleString('ar')}</td>
    <td>${c.paramedics}</td>
    <td>${c.ambulances}</td>
    <td style="font-family:'JetBrains Mono',monospace">${c.resp} Ø¯</td>
    <td style="font-family:'JetBrains Mono',monospace">${c.dispatch} Ø¯</td>
    <td style="color:${c.late>96?'var(--red)':c.late>95?'var(--amber)':'var(--green)'}">${c.late}%</td>
    <td><span class="chip ${c.late>96?'chip-crit':c.late>95?'chip-warn':'chip-ok'}">${c.late>96?'Ø­Ø±Ø¬':c.late>95?'ØªØ­Ø°ÙŠØ±':'Ø·Ø¨ÙŠØ¹ÙŠ'}</span></td>
  </tr>`).join('');
}

function renderCentersProgress() {
  const el = document.getElementById('centers-progress');
  el.innerHTML = CENTERS_DATA.slice(0,8).map(c=>`
    <div class="progress-row">
      <span class="progress-label">${c.id}</span>
      <div class="progress-bar"><div class="progress-fill" style="width:${c.late}%;background:${c.late>96?'var(--red)':c.late>95?'var(--amber)':'var(--green)'}"></div></div>
      <span class="progress-val" style="color:${c.late>96?'var(--red)':'var(--muted)'}">${c.late}%</span>
    </div>`).join('');
}

function renderParamedics() {
  const tbody = document.getElementById('paramedics-body');
  tbody.innerHTML = PARAMEDICS_DATA.map(p=>{
    const sc = p.status==='Ù…ØªØ§Ø­'?'chip-ok':p.status==='ÙÙŠ Ù…Ù‡Ù…Ø©'?'chip-warn':'chip-info';
    return `<tr>
      <td><strong>${p.id}</strong></td>
      <td>${p.center}</td>
      <td>${p.missions}</td>
      <td style="font-family:'JetBrains Mono',monospace">${p.resp} Ø¯</td>
      <td style="color:var(--amber)">${p.good}%</td>
      <td>${p.emergency}</td>
      <td><span class="chip ${sc}">${p.status}</span></td>
    </tr>`;
  }).join('');
}

function renderMissions() {
  const tbody = document.getElementById('missions-body');
  tbody.innerHTML = MISSIONS_SAMPLE.map(m=>`<tr>
    <td style="font-family:'JetBrains Mono',monospace;color:var(--teal)">${m.ref}</td>
    <td>${m.date}</td>
    <td>${m.dept}</td>
    <td><span class="chip ${m.type==='Ø¥Ù†Ù‚Ø§Ø° Ø­ÙŠØ§Ø©'?'chip-crit':'chip-ok'}">${m.type}</span></td>
    <td>${m.center}</td>
    <td>${m.para}</td>
    <td style="font-family:'JetBrains Mono',monospace">${m.resp} Ø¯</td>
    <td><span class="chip ${m.perf==='Ù…ØªØ£Ø®Ø±'?'chip-warn':'chip-ok'}">${m.perf}</span></td>
    <td><button class="btn btn-secondary btn-sm" style="padding:4px 10px;font-size:11px">Ø¹Ø±Ø¶</button></td>
  </tr>`).join('');
}

function renderAlerts() {
  const ALERTS = [
    {color:'var(--red)',icon:'ğŸš¨',title:'Ù…Ø±ÙƒØ² C6 â€” Ù…Ø¹Ø¯Ù„ ØªØ£Ø®ÙŠØ± Ø­Ø±Ø¬ (96.4%)',
     desc:'ÙŠØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ 95%. ÙŠÙÙˆØµÙ‰ Ø¨Ù…Ø±Ø§Ø¬Ø¹Ø© ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù… ÙˆØ±ÙØ¹ ØªÙ‚Ø±ÙŠØ±.',
     time:'Ù…Ù†Ø° 5 Ø¯Ù‚Ø§Ø¦Ù‚',action:'Ù…Ø±Ø§Ø¬Ø¹Ø©'},
    {color:'var(--amber)',icon:'âš¡',title:'ØªØ±ÙƒÙ‘Ø² Ø§Ù„ÙˆØ±Ø¯ÙŠØ© Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ© (60.1%)',
     desc:'Ù…Ø¹Ø¸Ù… Ø§Ù„Ù…Ù‡Ø§Ù… ÙÙŠ Ø§Ù„ØµØ¨Ø§Ø­ â€” ÙŠÙÙˆØµÙ‰ Ø¨Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø·Ø§Ù‚Ù… Ù„Ù„ÙˆØ±Ø¯ÙŠØ© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©.',
     time:'Ù…Ù†Ø° Ø³Ø§Ø¹Ø©',action:'Ø¬Ø¯ÙˆÙ„Ø©'},
    {color:'var(--teal2)',icon:'ğŸ¥',title:'Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ H1 ÙŠØ³ØªÙ‚Ø¨Ù„ 72.1% Ù…Ù† Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª',
     desc:'Ø®Ø·Ø± Ø§Ø®ØªÙ†Ø§Ù‚ â€” ÙŠÙÙˆØµÙ‰ Ø¨ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‚Ø±Ø© Ù„Ù€ H2 ÙˆH3.',
     time:'Ù…Ù†Ø° 3 Ø³Ø§Ø¹Ø§Øª',action:'ØªÙˆØ¬ÙŠÙ‡'},
    {color:'var(--green)',icon:'âœ…',title:'ØªÙ‚Ø±ÙŠØ± Ø£Ù…Ø³ Ø£ÙØ±Ø³Ù„ Ø¨Ù†Ø¬Ø§Ø­',
     desc:'ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡ Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø¥Ø³Ø¹Ø§Ù Ø¹Ø¨Ø± Make.com.',
     time:'Ø£Ù…Ø³ 7:02 ØµØ¨Ø§Ø­Ø§Ù‹',action:'Ø¹Ø±Ø¶'},
  ];
  const el = document.getElementById('alerts-full');
  const feed = document.getElementById('dashboard-alerts');
  const html = ALERTS.map(a=>`
    <div class="card" style="border-right:4px solid ${a.color};padding:18px 20px">
      <div style="display:flex;align-items:center;justify-content:space-between">
        <div style="display:flex;align-items:center;gap:12px">
          <span style="font-size:22px">${a.icon}</span>
          <div>
            <div style="font-size:14px;font-weight:700;margin-bottom:4px">${a.title}</div>
            <div style="font-size:12px;color:var(--muted)">${a.desc}</div>
          </div>
        </div>
        <div style="display:flex;align-items:center;gap:10px;flex-shrink:0">
          <span style="font-size:11px;color:var(--muted)">${a.time}</span>
          <button class="btn btn-secondary btn-sm" onclick="showToast('ØªÙ… Ø§ØªØ®Ø§Ø° Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ âœ…','success')">${a.action}</button>
        </div>
      </div>
    </div>`).join('');
  if(el) el.innerHTML = html;
  if(feed) feed.innerHTML = ALERTS.map(a=>`
    <div class="alert-item" style="border-color:${a.color}">
      <div class="alert-dot" style="background:${a.color}"></div>
      <div class="alert-content">
        <div class="alert-title">${a.icon} ${a.title}</div>
        <div class="alert-desc">${a.desc}</div>
      </div>
      <span class="alert-time">${a.time}</span>
    </div>`).join('');
}

function renderReportsHistory() {
  const el = document.getElementById('reports-history');
  const days = ['Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡','Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡','Ø§Ù„Ø§Ø«Ù†ÙŠÙ†','Ø§Ù„Ø£Ø­Ø¯','Ø§Ù„Ø³Ø¨Øª'];
  el.innerHTML = days.map((d,i)=>`
    <div class="stat-row">
      <div class="label">ØªÙ‚Ø±ÙŠØ± ${d} ${i===0?'(Ø§Ù„ÙŠÙˆÙ…)':''}</div>
      <div style="display:flex;align-items:center;gap:8px">
        <span class="chip chip-ok">ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</span>
        <button class="btn btn-secondary btn-sm" onclick="showToast('ÙØªØ­ Ø§Ù„ØªÙ‚Ø±ÙŠØ±...','info')">ğŸ“„ Ø¹Ø±Ø¶</button>
      </div>
    </div>`).join('');
}

function renderRecentEntries() {
  const el = document.getElementById('recent-entries');
  if(!el) return;
  el.innerHTML = recentEntries.slice(-5).reverse().map(e=>`
    <div style="display:flex;justify-content:space-between;align-items:center;padding:8px 12px;
      background:var(--surface2);border-radius:8px;font-size:12px">
      <span style="color:var(--teal);font-family:'JetBrains Mono',monospace">#${e.ref}</span>
      <span>${e.dept}</span>
      <span class="chip ${e.type==='Life-Saving'?'chip-crit':'chip-ok'}" style="font-size:9px">${e.type==='Life-Saving'?'Ø·ÙˆØ§Ø±Ø¦':'Ù…Ø³ØªÙ‚Ø±'}</span>
    </div>`).join('') || '<p style="font-size:12px;color:var(--muted);text-align:center;padding:16px">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¯Ø®Ù„Ø§Øª Ø¨Ø¹Ø¯</p>';
}

// â•â• LIVE SIMULATION â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let liveToday = 38;
function updateLive() {
  liveToday += Math.floor(Math.random()*3);
  document.getElementById('live-today').textContent = liveToday;
  document.getElementById('live-emergency').textContent = Math.floor(Math.random()*5)+2;
  const avail = Math.floor(Math.random()*20)+140;
  document.getElementById('live-available').textContent = avail;
  document.getElementById('para-available').textContent = avail;
  document.getElementById('para-onmission').textContent = 219-avail-9;
  document.getElementById('live-ambulances').textContent = Math.floor(Math.random()*20)+40;
  document.getElementById('live-resp').textContent = (13.8+Math.random()*.8).toFixed(1);
}

function addFeedItem(targetId) {
  const e = FEED_POOL[Math.floor(Math.random()*FEED_POOL.length)];
  const now = new Date().toLocaleTimeString('ar-SA',{hour:'2-digit',minute:'2-digit',second:'2-digit'});
  const el = document.getElementById(targetId);
  if(!el) return;
  const item = document.createElement('div');
  item.className = 'alert-item';
  item.style.borderColor = e.c;
  item.innerHTML = `<div class="alert-dot" style="background:${e.c}"></div>
    <div class="alert-content">
      <div class="alert-title">${e.t}</div>
      <div class="alert-desc">${e.d}</div>
    </div>
    <span class="alert-time">${now}</span>`;
  el.insertBefore(item, el.firstChild);
  if(el.children.length>8) el.removeChild(el.lastChild);
}

// â•â• CLOCK â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateClock() {
  const now = new Date();
  document.getElementById('clockDisplay').textContent =
    now.toLocaleTimeString('ar-SA',{hour:'2-digit',minute:'2-digit',second:'2-digit'});
}

function updateReportCountdown() {
  const now = new Date();
  const next = new Date(now); next.setHours(24,0,0,0);
  const d = next-now;
  const h = Math.floor(d/3600000), m = Math.floor((d%3600000)/60000), s = Math.floor((d%60000)/1000);
  const el = document.getElementById('report-countdown');
  if(el) el.textContent = `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
}

// â•â• NAVIGATION â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const PAGE_LABELS = {
  dashboard:'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…', live:'Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù„Ø­Ø¸ÙŠØ©',
  missions:'Ø³Ø¬Ù„ Ø§Ù„Ù…Ù‡Ø§Ù…', entry:'Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª',
  centers:'Ø§Ù„Ù…Ø±Ø§ÙƒØ²', paramedics:'Ø§Ù„Ù…Ø³Ø¹ÙÙˆÙ†',
  reports:'Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±', alerts:'Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª', settings:'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª'
};

function navigate(page) {
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  document.getElementById('page-'+page).classList.add('active');
  document.querySelectorAll('.nav-item').forEach(n=>{
    if(n.getAttribute('onclick')?.includes(`'${page}'`)) n.classList.add('active');
  });
  document.getElementById('pageLabel').textContent = PAGE_LABELS[page]||page;
  if(document.getElementById('notifPanel')) document.getElementById('notifPanel').style.display='none';
}

// â•â• NOTIFICATIONS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleNotif() {
  const p = document.getElementById('notifPanel');
  p.style.display = p.style.display==='block' ? 'none' : 'block';
}

// â•â• TOAST â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showToast(msg, type='info') {
  const icons = {success:'âœ…',error:'âŒ',info:'â„¹ï¸'};
  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  toast.innerHTML = `<span>${icons[type]}</span><span>${msg}</span>`;
  document.getElementById('toastContainer').appendChild(toast);
  setTimeout(()=>toast.remove(), 3500);
}

// â•â• FORM SUBMIT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function submitMission() {
  const ref = document.getElementById('f-ref').value || String(Math.floor(Math.random()*90000)+100100);
  const dept = document.getElementById('f-dept').value;
  const type = document.getElementById('f-type').value;
  if(!ref){showToast('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¥Ø­Ø§Ù„Ø©','error');return;}
  recentEntries.push({ref, dept, type});
  renderRecentEntries();
  showToast(`ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù‡Ù…Ø© #${ref} Ø¨Ù†Ø¬Ø§Ø­ âœ…`,'success');
  document.getElementById('missionForm').reset();
}

function handleFileUpload(input) {
  const f = input.files[0];
  if(f) {
    document.getElementById('upload-status').textContent = `âœ… ØªÙ… Ø±ÙØ¹: ${f.name}`;
    showToast(`Ø¬Ø§Ø±Ù Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${f.name} ...`,'info');
    setTimeout(()=>showToast('ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ 47 Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­ âœ…','success'),1800);
  }
}
function handleDrop(e) {
  e.preventDefault();
  const f = e.dataTransfer.files[0];
  if(f){document.getElementById('upload-status').textContent=`âœ… ${f.name}`;showToast('Ø¬Ø§Ø±Ù Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ù„Ù...','info');}
}

// â•â• WEBHOOK TEST â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function testWebhook() {
  showToast('Ø¬Ø§Ø±Ù Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Make.com...','info');
  setTimeout(()=>showToast('âœ… Make.com Ù…ØªØµÙ„ ÙˆØ¬Ø§Ù‡Ø²!','success'),1500);
}

// â•â• GENERATE REPORT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function generateReport() {
  const now = new Date();
  const dateStr = now.toLocaleDateString('ar-SA',{weekday:'long',year:'numeric',month:'long',day:'numeric'});
  const w = window.open('','_blank');
  w.document.write(`<!DOCTYPE html><html lang="ar" dir="rtl"><head>
<meta charset="UTF-8"/><title>Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet"/>
<style>
body{font-family:'Cairo',sans-serif;margin:0;padding:40px;color:#0a0f1e;background:#fff;line-height:1.6;}
.header{background:linear-gradient(135deg,#1B3A6B,#0D7377);color:white;padding:28px 32px;border-radius:16px;margin-bottom:32px;}
.header h1{font-size:24px;font-weight:900;margin-bottom:4px;}
.header p{font-size:13px;opacity:.8;}
.meta{display:flex;gap:0;margin-bottom:28px;border:1px solid #e5e7eb;border-radius:12px;overflow:hidden;}
.meta-item{flex:1;padding:14px 18px;border-left:1px solid #e5e7eb;text-align:center;}
.meta-item:first-child{border-left:none;}
.meta-label{font-size:10px;color:#6b7280;font-weight:700;letter-spacing:.5px;text-transform:uppercase;}
.meta-val{font-size:20px;font-weight:900;color:#1B3A6B;margin-top:4px;}
.section{font-size:12px;font-weight:800;color:#0D7377;letter-spacing:.6px;text-transform:uppercase;
  border-bottom:2px solid #0D7377;padding-bottom:7px;margin:28px 0 16px;}
.kpi-row{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-bottom:24px;}
.kpi-box{padding:16px;border:1px solid #e5e7eb;border-radius:12px;text-align:center;border-top:3px solid;}
.kpi-box .v{font-size:26px;font-weight:900;}
.kpi-box .l{font-size:11px;color:#6b7280;margin-top:4px;}
table{width:100%;border-collapse:collapse;font-size:12px;}
th{background:#1B3A6B;color:white;padding:10px 14px;text-align:right;font-weight:700;}
td{padding:9px 14px;border-bottom:1px solid #f3f4f6;}
tr:nth-child(even) td{background:#f9fafb;}
.chip{padding:2px 10px;border-radius:100px;font-size:10px;font-weight:800;}
.alert-block{padding:14px 18px;border-radius:10px;margin-bottom:10px;border-right:4px solid;}
.alert-block strong{display:block;font-size:13px;margin-bottom:3px;}
.alert-block p{font-size:12px;color:#6b7280;margin:0;}
.footer{margin-top:40px;padding-top:20px;border-top:1px solid #e5e7eb;font-size:11px;color:#9ca3af;text-align:center;}
.print-btn{position:fixed;bottom:20px;left:20px;padding:10px 22px;background:#0D7377;color:white;
  border:none;border-radius:10px;cursor:pointer;font-family:'Cairo',sans-serif;font-size:14px;font-weight:700;}
@media print{.print-btn{display:none;}}
</style></head><body>
<div class="header">
  <h1>ğŸ“Š Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ â€” Ù†Ø¸Ø§Ù… ÙˆØµÙ„ Ù„Ù†Ù‚Ù„ Ø§Ù„Ù…Ø±Ø¶Ù‰</h1>
  <p>${dateStr} | Ø³Ø±ÙŠ â€” Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ ÙÙ‚Ø·</p>
</div>
<div class="meta">
  <div class="meta-item"><div class="meta-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‡Ø§Ù…</div><div class="meta-val">14,169</div></div>
  <div class="meta-item"><div class="meta-label">Ø§Ù„Ù…Ø±Ø§ÙƒØ² Ø§Ù„Ù†Ø´Ø·Ø©</div><div class="meta-val">20</div></div>
  <div class="meta-item"><div class="meta-label">Ø§Ù„Ù…Ø³Ø¹ÙÙˆÙ†</div><div class="meta-val">219</div></div>
  <div class="meta-item"><div class="meta-label">Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¥Ø³Ø¹Ø§Ù</div><div class="meta-val">96</div></div>
  <div class="meta-item"><div class="meta-label">Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</div><div class="meta-val" style="color:#15803d">âœ… Ø·Ø¨ÙŠØ¹ÙŠ</div></div>
</div>
<div class="section">Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
<div class="kpi-row">
  <div class="kpi-box" style="border-color:#0D7377"><div class="v" style="color:#0D7377">14.5 Ø¯</div><div class="l">Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©</div></div>
  <div class="kpi-box" style="border-color:#0D7377"><div class="v" style="color:#0D7377">5.5 Ø¯</div><div class="l">Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</div></div>
  <div class="kpi-box" style="border-color:#dc2626"><div class="v" style="color:#dc2626">95.3%</div><div class="l">âš ï¸ Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ£Ø®ÙŠØ±</div></div>
  <div class="kpi-box" style="border-color:#d97706"><div class="v" style="color:#d97706">35.1%</div><div class="l">Ù†Ø³Ø¨Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</div></div>
</div>
<div class="section">Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©</div>
<div class="alert-block" style="background:#fef2f2;border-color:#ef4444">
  <strong>ğŸš¨ Ù…Ø±ÙƒØ² C6 â€” Ù…Ø¹Ø¯Ù„ ØªØ£Ø®ÙŠØ± Ø­Ø±Ø¬ (96.4%)</strong>
  <p>ÙŠØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ 95% â€” ÙŠÙÙˆØµÙ‰ Ø¨Ù…Ø±Ø§Ø¬Ø¹Ø© ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù… ÙÙˆØ±Ø§Ù‹</p>
</div>
<div class="alert-block" style="background:#fffbeb;border-color:#f59e0b">
  <strong>âš¡ ØªØ±ÙƒÙ‘Ø² Ø§Ù„ÙˆØ±Ø¯ÙŠØ© Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ© (60.1%)</strong>
  <p>Ø§Ù„Ø¶ØºØ· ÙÙŠ Ø§Ù„ØµØ¨Ø§Ø­ Ø£Ø¹Ù„Ù‰ Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ© Ø¨Ù€ 50% â€” ÙŠÙÙˆØµÙ‰ Ø¨Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ²ÙŠØ¹</p>
</div>
<div class="alert-block" style="background:#eff6ff;border-color:#3b82f6">
  <strong>ğŸ¥ H1 ÙŠØ³ØªÙ‚Ø¨Ù„ 72.1% Ù…Ù† Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª</strong>
  <p>Ø®Ø·Ø± Ø§Ø®ØªÙ†Ø§Ù‚ â€” ÙŠÙÙˆØµÙ‰ Ø¨ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‚Ø±Ø© Ù„Ù€ H2 ÙˆH3</p>
</div>
<div class="section">Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø±Ø§ÙƒØ²</div>
<table><thead><tr>
  <th>Ø§Ù„Ù…Ø±ÙƒØ²</th><th>Ø§Ù„Ù…Ù‡Ø§Ù…</th><th>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©</th><th>Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ£Ø®ÙŠØ±</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
</tr></thead><tbody>
${CENTERS_DATA.map(c=>`<tr>
  <td><strong>${c.id}</strong></td>
  <td>${c.missions.toLocaleString('ar')}</td>
  <td>${c.resp} Ø¯Ù‚ÙŠÙ‚Ø©</td>
  <td style="color:${c.late>96?'#dc2626':'#d97706'}">${c.late}%</td>
  <td><span class="chip" style="background:${c.late>96?'#fee2e2':c.late>95?'#fef3c7':'#d1fae5'};color:${c.late>96?'#991b1b':c.late>95?'#92400e':'#065f46'}">${c.late>96?'Ø­Ø±Ø¬':c.late>95?'ØªØ­Ø°ÙŠØ±':'Ø·Ø¨ÙŠØ¹ÙŠ'}</span></td>
</tr>`).join('')}
</tbody></table>
<div class="section">Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©</div>
<ol style="font-size:13px;color:#374151;line-height:2.2;padding-right:22px">
  <li>Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…Ø¹Ø§ÙŠÙŠØ± ØªØµÙ†ÙŠÙ Ø§Ù„Ø£Ø¯Ø§Ø¡ â€” 95.3% ØªØ£Ø®ÙŠØ± ÙŠØ´ÙŠØ± Ù„Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ù„Ø§ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</li>
  <li>Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ²ÙŠØ¹ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ H1</li>
  <li>Ø²ÙŠØ§Ø¯Ø© Ø·Ø§Ù‚Ù… Ø§Ù„ÙˆØ±Ø¯ÙŠØ© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ© ÙÙŠ Ø§Ù„Ù…Ø±Ø§ÙƒØ² Ø§Ù„ÙƒØ¨Ø±Ù‰ (C1, C2, C3)</li>
  <li>Ù…Ø±Ø§Ø¬Ø¹Ø© Ù‚Ø¯Ø±Ø© Ø§Ù„Ù…Ø±Ø§ÙƒØ² Ø§Ù„ØµØºÙŠØ±Ø© (C16-C20) Ø¹Ù„Ù‰ ØªØ­Ù…Ù‘Ù„ Ø£Ø¹Ø¨Ø§Ø¡ Ø¥Ø¶Ø§ÙÙŠØ©</li>
  <li>ØªÙØ¹ÙŠÙ„ Ø®Ø·Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ Ù„Ù…ÙˆØ§Ø¬Ù‡Ø© Ù†Ù‚Øµ Ø§Ù„ØªØ®ØµØµØ§Øª ÙˆØ§Ù„Ù…Ø¹Ø¯Ø§Øª (66.7% Ù…Ù† Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª)</li>
</ol>
<div class="footer">ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨ÙˆØ§Ø³Ø·Ø© Ù†Ø¸Ø§Ù… ÙˆØµÙ„ â€” ${dateStr}<br/>
Ø³Ø±ÙŠ ÙˆÙ…Ø®ØµØµ Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø¥Ø³Ø¹Ø§Ù ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ© ÙÙ‚Ø· | ÙˆØµÙ„ v2.0</div>
<button class="print-btn" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© / PDF</button>
<script>const CENTERS_DATA=${JSON.stringify(CENTERS_DATA)};<\/script>
</body></html>`);
  w.document.close();
  showToast('ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ± â€” Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± Make.com âœ…','success');
}

function refreshData() {
  showToast('Ø¬Ø§Ø±Ù ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...','info');
  setTimeout(()=>showToast('ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« âœ…','success'),1000);
}

// â•â• INIT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('DOMContentLoaded',()=>{
  initCharts();
  renderDashboardCenters();
  renderAllCenters();
  renderCentersProgress();
  renderParamedics();
  renderMissions();
  renderAlerts();
  renderReportsHistory();
  // Initial feed
  for(let i=0;i<5;i++) setTimeout(()=>addFeedItem('live-feed'),i*300);
  // Loops
  setInterval(updateClock,1000);
  setInterval(updateReportCountdown,1000);
  setInterval(()=>{updateLive();addFeedItem('live-feed');},5000);
  updateClock(); updateLive(); updateReportCountdown();
  // Set today's date default
  document.getElementById('f-date').value = new Date().toISOString().split('T')[0];
});
document.addEventListener('click',e=>{
  const panel=document.getElementById('notifPanel');
  if(panel&&panel.style.display==='block'&&!panel.contains(e.target)&&!e.target.closest('.icon-btn'))
    panel.style.display='none';
});
</script>
</body>
</html>
